[gd_scene load_steps=55 format=3 uid="uid://dgqp3sqvmcvpu"]

[ext_resource type="Script" path="res://scenes/actors/mario/player.gd" id="1_3d0l6"]
[ext_resource type="Texture2D" uid="uid://bfwe80wtp2uqy" path="res://scenes/actors/mario/anime/walk.png" id="2_5xkqu"]
[ext_resource type="Texture2D" uid="uid://ccfxaveftr1f0" path="res://scenes/actors/mario/anime/crouch.png" id="2_b7wew"]
[ext_resource type="Script" path="res://scenes/actors/mario/player_movement.gd" id="3_3mh1j"]
[ext_resource type="Texture2D" uid="uid://dcfs6qlmbk0rv" path="res://scenes/actors/mario/anime/crouch_walk.png" id="3_5bgdw"]
[ext_resource type="Texture2D" uid="uid://mgjnjyjy5rh8" path="res://scenes/actors/mario/anime/push.png" id="3_pq7bv"]
[ext_resource type="Script" path="res://scenes/actors/mario/state_coordinator.gd" id="3_t4ior"]
[ext_resource type="Texture2D" uid="uid://cof524axgo162" path="res://scenes/actors/mario/anime/skid.png" id="3_x2igy"]
[ext_resource type="Texture2D" uid="uid://c3oofyu0r7jw2" path="res://scenes/actors/mario/anime/slow_turn.png" id="4_4n8xm"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/idle.gd" id="4_6nkrr"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/walk.gd" id="5_8nim3"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/fall.gd" id="7_k5wtt"]
[ext_resource type="Script" path="res://scenes/actors/mario/push_ray.gd" id="8_qbkd3"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/jump.gd" id="9_5aeak"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/skid.gd" id="9_h077q"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/slow_turn.gd" id="10_aswnq"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/push.gd" id="14_h5y00"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/crouch.gd" id="15_0vb6m"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/dry_push.gd" id="15_x1462"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/crouch_walk.gd" id="18_p8tih"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/sideflip.gd" id="20_jw6y3"]
[ext_resource type="Script" path="res://scenes/actors/mario/states/backflip.gd" id="21_3icss"]

[sub_resource type="AtlasTexture" id="AtlasTexture_obm5j"]
atlas = ExtResource("2_b7wew")
region = Rect2(0, 0, 15, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_y7gv2"]
atlas = ExtResource("3_5bgdw")
region = Rect2(17, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_knyeh"]
atlas = ExtResource("3_5bgdw")
region = Rect2(34, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_rajkh"]
atlas = ExtResource("3_5bgdw")
region = Rect2(51, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_v7bcm"]
atlas = ExtResource("3_5bgdw")
region = Rect2(68, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_4dobt"]
atlas = ExtResource("3_5bgdw")
region = Rect2(85, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_xab8d"]
atlas = ExtResource("3_5bgdw")
region = Rect2(102, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_orbi7"]
atlas = ExtResource("3_5bgdw")
region = Rect2(119, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_kciot"]
atlas = ExtResource("3_5bgdw")
region = Rect2(0, 0, 17, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_20hs7"]
atlas = ExtResource("2_5xkqu")
region = Rect2(0, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5c7ec"]
atlas = ExtResource("3_pq7bv")
region = Rect2(0, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_tde5x"]
atlas = ExtResource("3_pq7bv")
region = Rect2(23, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_28m7i"]
atlas = ExtResource("3_pq7bv")
region = Rect2(46, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_vorl5"]
atlas = ExtResource("3_pq7bv")
region = Rect2(69, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_snwk4"]
atlas = ExtResource("3_pq7bv")
region = Rect2(92, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_m62ub"]
atlas = ExtResource("3_pq7bv")
region = Rect2(115, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_le8mf"]
atlas = ExtResource("3_pq7bv")
region = Rect2(138, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_mhxr7"]
atlas = ExtResource("3_pq7bv")
region = Rect2(161, 0, 23, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ijj76"]
atlas = ExtResource("3_x2igy")
region = Rect2(0, 0, 25, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_a40ux"]
atlas = ExtResource("4_4n8xm")
region = Rect2(0, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_j314o"]
atlas = ExtResource("2_5xkqu")
region = Rect2(16, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_pntij"]
atlas = ExtResource("2_5xkqu")
region = Rect2(32, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_whh0e"]
atlas = ExtResource("2_5xkqu")
region = Rect2(48, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_yr443"]
atlas = ExtResource("2_5xkqu")
region = Rect2(64, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_0pk7k"]
atlas = ExtResource("2_5xkqu")
region = Rect2(80, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_syywp"]
atlas = ExtResource("2_5xkqu")
region = Rect2(96, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ey50o"]
atlas = ExtResource("2_5xkqu")
region = Rect2(112, 0, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ugscn"]
atlas = ExtResource("2_5xkqu")
region = Rect2(0, 0, 16, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_hmp25"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_obm5j")
}],
"loop": true,
"name": &"crouch",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_y7gv2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_knyeh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rajkh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v7bcm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4dobt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xab8d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_orbi7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kciot")
}],
"loop": true,
"name": &"crouch_walk",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_20hs7")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_5c7ec")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tde5x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_28m7i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vorl5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_snwk4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m62ub")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_le8mf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mhxr7")
}],
"loop": true,
"name": &"push",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ijj76")
}],
"loop": true,
"name": &"skid",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_a40ux")
}],
"loop": true,
"name": &"slow_turn",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_j314o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pntij")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_whh0e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yr443")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0pk7k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_syywp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ey50o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ugscn")
}],
"loop": true,
"name": &"walk",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sk4yn"]
size = Vector2(12, 14)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_u4b58"]
size = Vector2(12, 28)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_s1eck"]
size = Vector2(12, 14)

[node name="Mario" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_3d0l6")

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2(0, -30)
zoom = Vector2(3, 3)

[node name="Doll" type="AnimatedSprite2D" parent="."]
position = Vector2(-1, -16)
sprite_frames = SubResource("SpriteFrames_hmp25")
animation = &"crouch"

[node name="CrouchLock" type="Area2D" parent="."]
unique_name_in_owner = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CrouchLock"]
position = Vector2(-1, -21)
shape = SubResource("RectangleShape2D_sk4yn")
debug_color = Color(0.898039, 0.658824, 0.701961, 0.419608)

[node name="Hitbox" type="CollisionShape2D" parent="."]
unique_name_in_owner = true
position = Vector2(-1, -14)
shape = SubResource("RectangleShape2D_u4b58")

[node name="Crouchbox" type="CollisionShape2D" parent="."]
unique_name_in_owner = true
position = Vector2(-1, -7)
shape = SubResource("RectangleShape2D_s1eck")
debug_color = Color(0, 0.180392, 0.701961, 0.419608)

[node name="PushRay" type="RayCast2D" parent="." node_paths=PackedStringArray("movement")]
modulate = Color(1, 1, 0.164706, 1)
position = Vector2(-1, -14)
target_position = Vector2(8, 0)
script = ExtResource("8_qbkd3")
target_size_x = 8.0
movement = NodePath("../Movement")

[node name="Movement" type="Node" parent="." node_paths=PackedStringArray("actor")]
script = ExtResource("3_3mh1j")
actor = NodePath("..")

[node name="StateCoordinator" type="Node" parent="." node_paths=PackedStringArray("current_state")]
script = ExtResource("3_t4ior")
current_state = NodePath("==GROUNDMOVEMENT==/Idle")

[node name="==GROUNDMOVEMENT==" type="Node" parent="StateCoordinator"]

[node name="Idle" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("4_6nkrr")
animation_name = &"idle"

[node name="Walk" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("5_8nim3")
animation_name = &"walk"

[node name="Skid" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("9_h077q")
animation_name = &"skid"

[node name="SlowTurn" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("10_aswnq")
animation_name = &"slow_turn"

[node name="DryPush" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("15_x1462")
animation_name = &"idle"

[node name="Push" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("14_h5y00")
animation_name = &"push"
offset_x = 3.0

[node name="Crouch" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("15_0vb6m")
animation_name = &"crouch"

[node name="CrouchWalk" type="Node" parent="StateCoordinator/==GROUNDMOVEMENT=="]
unique_name_in_owner = true
script = ExtResource("18_p8tih")
animation_name = &"crouch_walk"
offset_y = 8.0

[node name="==JUMPING==" type="Node" parent="StateCoordinator"]

[node name="Jump" type="Node" parent="StateCoordinator/==JUMPING=="]
unique_name_in_owner = true
script = ExtResource("9_5aeak")

[node name="Fall" type="Node" parent="StateCoordinator/==JUMPING=="]
unique_name_in_owner = true
script = ExtResource("7_k5wtt")

[node name="Sideflip" type="Node" parent="StateCoordinator/==JUMPING=="]
unique_name_in_owner = true
script = ExtResource("20_jw6y3")

[node name="Backflip" type="Node" parent="StateCoordinator/==JUMPING=="]
unique_name_in_owner = true
script = ExtResource("21_3icss")
